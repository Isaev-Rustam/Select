!function(){"use strict";new class{constructor(){this.data=[],this.$select=document.querySelector(".select"),this.$select&&(this.#e(),this.#t())}#e(){this.$select.innerHTML=this.#s()}#s(){return'\n      <div class="select__wrap">\n        <input class="select__search" type="text" name="search" data-type = "input" placeholder="search" autofocus >\n        <ul class="select__lists" data-type = "drop-down"></ul>\n        <div class="select__repo" data-type = "repo"></div>\n      </div>'}#t(){this.renderItems=[],this.$search=this.$select.querySelector("[data-type = input]"),this.$dropDown=this.$select.querySelector("[data-type = drop-down]"),this.$repo=this.$select.querySelector("[data-type = repo]"),this.inputHandler=this.inputHandler.bind(this),this.$search.addEventListener("input",this.#r(this.inputHandler,300)),this.clickHandler=this.clickHandler.bind(this),this.$select.addEventListener("click",this.clickHandler)}#r(e,t){let s=null;return(...r)=>{s&&clearTimeout(s),s=setTimeout(e,t,...r)}}async inputHandler(e){const t=this.$search.value.trim();if(!t)return this.#i(),void this.#n();const s=await this.getData(t);this.data=s,this.#a()}async getData(e){try{const t=`https://api.github.com/search/repositories?q=${e}`,s=await fetch(t);return(await s.json()).items.slice(0,5)}catch(e){console.log(e)}}clickHandler(e){const t=e.target,s=t.closest("LI"),r=t.closest("BUTTON");if(r)return this.#c(r),void this.#l();if(s){if(this.#i(),this.#n(),this.renderItems.length>=3)return;s.classList.add("select__active");const e=this.data.find((e=>e.id==s.dataset.id));return this.renderItems.push(e),void this.#l()}}#c(e){[...this.$dropDown.children].forEach((e=>{e.classList.contains("select__active")&&e.classList.remove("select__active")})),this.renderItems=this.renderItems.filter((t=>t.id!=e.dataset.id))}#i(){this.$search.value=""}#n(){this.$dropDown.innerHTML=""}#a(){this.$select.classList.add("select--open"),this.#n();const e=[];this.data.forEach((({id:t,name:s})=>{const r=this.#o("LI","select__item",null,{name:"id",id:t}),i=this.#o("A","select__link",s,null);r.append(i),e.push(r)})),this.$dropDown.append(...e)}#l(){this.$repo.innerHTML="";const e=[];this.renderItems.forEach((({id:t,name:s,owner:{login:r},stargazers_count:i})=>{const n=this.#o("DIV","select__repo-wrap",null,null),a=this.#o("DIV","select__repo-name",`Name: ${s}`,null),c=this.#o("DIV","select__repo-login",`Owner: ${r}`,null),l=this.#o("DIV","select__repo-star",`Stars: ${i}`,null),o=this.#o("BUTTON","select__btn",null,{name:"id",id:t});n.append(a,c,l,o),e.push(n)})),this.$repo.append(...e)}destroyEvents(){this.$select.removeEventListener("click",this.clickHandler)}#o(e,t,s,r){const i=document.createElement(e);return t&&i.classList.add(t),s&&(i.textContent=s),r?.id&&(i.dataset[r.name]=r.id),i}}}();
//# sourceMappingURL=bundle.js.map