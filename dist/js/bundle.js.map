{"version":3,"file":"./js/bundle.js","mappings":"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","sources":["webpack://webpack-test/./src/js/index.js","webpack://webpack-test/./src/js/select/select.js"],"sourcesContent":["import '../scss/style.scss';\nimport {Select} from'./select/select';\n\n\nnew Select();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","export class Select {\n  constructor() {\n    this.data = [];\n    this.$select = document.querySelector(\".select\");\n    if (this.$select) {\n      this.#render();\n      this.#setup();\n    }\n  }\n\n  #render() {\n    this.$select.innerHTML = this.#getTemplateBody();\n  }\n\n  #getTemplateBody() {\n    return `\n      <div class=\"select__wrap\">\n        <input class=\"select__search\" type=\"text\" name=\"search\" data-type = \"input\" placeholder=\"search\" autofocus >\n        <ul class=\"select__lists\" data-type = \"drop-down\"></ul>\n        <div class=\"select__repo\" data-type = \"repo\"></div>\n      </div>`;\n  }\n\n  #setup() {\n    this.renderItems = [];\n\n    this.$search = this.$select.querySelector(\"[data-type = input]\");\n    this.$dropDown = this.$select.querySelector(\"[data-type = drop-down]\");\n    this.$repo = this.$select.querySelector(\"[data-type = repo]\");\n\n    this.inputHandler = this.inputHandler.bind(this);\n    this.$search.addEventListener(\"input\", this.#debounce(this.inputHandler, 300));\n\n    this.clickHandler = this.clickHandler.bind(this);\n    this.$select.addEventListener(\"click\", this.clickHandler);\n  }\n\n  #debounce(callback, time) {\n    let timeout = null;\n    return (...arg) => {\n      if (timeout) clearTimeout(timeout);\n      timeout = setTimeout(callback, time, ...arg);\n    }\n  }\n\n  clearInputValue() {\n    this.$search.value = \"\";\n  }\n\n  async inputHandler(event) {\n    const value = this.$search.value.trim();\n    if (!value) {\n      this.$dropDown.innerHTML = \"\";\n      this.clearInputValue();\n      return;\n    }\n    const data = await this.getData(value);\n    this.$select.classList.add(\"select--open\");\n    const arr = data.items.slice(0, 5);\n    this.data = arr;\n    this.#renderDropDown();\n  }\n\n  async getData(token) {\n    try {\n      const url = `https://api.github.com/search/repositories?q=${token}`;\n      const response = await fetch(url);\n      const result = await response.json();\n      return result\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  clickHandler(event) {\n    const target = event.target;\n    const $list = target.closest(\"LI\");\n    const $repoCloseBtn = target.closest(\"BUTTON\");\n    if ($repoCloseBtn) {\n      this.#removeRenderItem($repoCloseBtn);\n      this.#renderRepositories();\n      return;\n    }\n\n    if ($list) {\n      if ($list.classList.contains(\"select__active\")) {\n        this.#removeRenderItem($list);\n        this.#renderRepositories();\n        return;\n      }\n\n      if (!$list.classList.contains(\"select__active\")) {\n        this.clearInputValue();\n        if (this.renderItems.length >= 3) return;\n        $list.classList.add(\"select__active\");\n        const renderObj = this.data.find(i => i.id == $list.dataset.id);\n        this.renderItems.push(renderObj);\n        this.#renderRepositories();\n      }\n    }\n  }\n\n  #removeRenderItem($item) {\n    const listItems = [...this.$dropDown.children];\n    listItems.forEach(i => {\n      if (i.classList.contains(\"select__active\")) {\n        i.classList.remove(\"select__active\");\n      }\n    })\n    this.renderItems = this.renderItems.filter(i => i.id != $item.dataset.id);\n  }\n\n  #renderDropDown() {\n    const $listItems = [];\n    this.$dropDown.innerHTML = \"\";\n\n    this.data.forEach(({id, name,}) => {\n\n      const $dropDownItem = this.#createElement(\"LI\", \"select__item\", null, {name: \"id\", id: id});\n\n      const $dropDownLink = this.#createElement(\"A\", \"select__link\", name, null);\n\n      $dropDownItem.append($dropDownLink);\n      $listItems.push($dropDownItem);\n    })\n    this.$dropDown.append(...$listItems);\n  }\n\n  #renderRepositories() {\n    this.$repo.innerHTML = \"\";\n    const $arItems = [];\n\n    this.renderItems.forEach(({id, name, owner: {login}, stargazers_count: star}) => {\n\n      const $repoWrap = this.#createElement(\"DIV\", \"select__repo-wrap\", null);\n\n      const $repoNameItem = this.#createElement(\"DIV\", \"select__repo-name\", `Name: ${name}`);\n\n      const $repoLoginItem = this.#createElement(\"DIV\", \"select__repo-login\", `Owner: ${login}`);\n\n      const $repoStarItem = this.#createElement(\"DIV\", \"select__repo-star\", `Stars: ${star}`);\n\n      $repoWrap.insertAdjacentHTML('afterbegin', `<button class=\"select__btn\"  type=\"button\" data-id = ${id}><span></span></button>`)\n\n      $repoWrap.append($repoNameItem, $repoLoginItem, $repoStarItem);\n\n      $arItems.push($repoWrap)\n    })\n\n    this.$repo.append(...$arItems);\n  }\n\n  destroyEvents() {\n    this.$select.removeEventListener(\"click\", this.clickHandler);\n  }\n\n  #createElement(tagName, selector, textContent, data) {\n    const $el = document.createElement(tagName);\n    if (selector) $el.classList.add(selector);\n    if (textContent) $el.textContent = textContent;\n    if (data?.id) $el.dataset[data.name] = data.id;\n    return $el;\n  }\n\n}\n"],"names":["constructor","this","data","$select","document","querySelector","innerHTML","renderItems","$search","$dropDown","$repo","inputHandler","bind","addEventListener","clickHandler","callback","time","timeout","arg","clearTimeout","setTimeout","clearInputValue","value","async","event","trim","getData","classList","add","arr","items","slice","token","url","response","fetch","json","error","console","log","target","$list","closest","$repoCloseBtn","contains","length","renderObj","find","i","id","dataset","push","$item","children","forEach","remove","filter","$listItems","name","$dropDownItem","$dropDownLink","append","$arItems","owner","login","stargazers_count","star","$repoWrap","$repoNameItem","$repoLoginItem","$repoStarItem","insertAdjacentHTML","destroyEvents","removeEventListener","tagName","selector","textContent","$el","createElement"],"sourceRoot":""}